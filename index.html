<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç“¦å‹’æ–¯ç¾é£Ÿé›·é” V1.0</title>
    <style>
        /* CSS æ¨£å¼é–‹å§‹ */
        :root {
            --main-red: #E91E63; /* ä¸»é¡Œç´… */
            --main-orange: #FF9800; /* æŒ‰éˆ•å¼·èª¿è‰² */
            --main-purple: #673AB7; /* å¹«æˆ‘é¸ æŒ‰éˆ•è‰² */
            --bg-light: #F8F8F8; /* æ·ºèƒŒæ™¯è‰² */
            --text-dark: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* æ¨™é¡Œå€ */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: var(--main-red);
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .header p {
            color: #777;
            margin-top: 0;
            font-size: 0.9em;
        }

        /* ä¸»é¤/ä¸‹åˆèŒ¶åˆ‡æ›æŒ‰éˆ•çµ„ */
        .main-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background-color: #eee;
            border-radius: 8px;
            padding: 5px;
        }

        .toggle-btn {
            flex-grow: 1;
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            border-radius: 6px;
            background-color: transparent;
            color: var(--text-dark);
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
        }

        .toggle-btn.active-main {
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            color: var(--main-orange);
            font-weight: bold;
        }

        /* é¸æ“‡å€å¡Š */
        .section-title {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--main-red);
            border-left: 4px solid var(--main-red);
            padding-left: 10px;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        /* æ ¸å¿ƒä¿®æ”¹é» A: å°‡ç¶²æ ¼å¾ 2 æ¬„æ”¹ç‚º 3 æ¬„ (ç‚ºäº†å®¹ç´æ›´å¤šé¤é») */
        .selection-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px;
        }

        .selection-button {
            padding: 15px 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95em;
            user-select: none;
            line-height: 1.2;
        }

        /* åœ–æ¨™é¡è‰²å’Œå¤§å°è¨­å®š */
        .selection-button span.icon {
            display: block;
            font-size: 1.4em; /* åœ–æ¨™/Emoji å­—é«”å¤§å° */
            margin-bottom: 4px;
        }

        /* æŒ‰éˆ•é¸ä¸­æ¨£å¼ */
        .selection-button.active-select {
            border: 2px solid var(--main-orange);
            background-color: #FFF3E0;
            color: var(--text-dark);
            box-shadow: 0 0 5px rgba(255, 152, 0, 0.5);
            font-weight: bold;
        }
        
        .hidden-food {
            display: none;
        }

        /* æœå°‹æŒ‰éˆ•çµ„ */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            flex-grow: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        #search-button {
            background-color: var(--main-orange);
            color: white;
        }

        #random-button {
            background-color: var(--main-purple);
            color: white;
        }

        .action-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            /* æ‰‹æ©Ÿä¸Šä»ç„¶ç¶­æŒ 2 æ¬„æˆ– 1 æ¬„ï¼Œé¿å…éæ“  */
            .selection-grid {
                grid-template-columns: repeat(2, 1fr); 
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <span style="color: var(--main-red); margin-right: 5px;">ğŸ“</span>
            <h1>ç“¦å‹’æ–¯ç¾é£Ÿé›·é” V1.0</h1>
            <p>Google Map æ™ºæ…§å¿«æœ</p>
        </div>

        <div class="main-toggle">
            <button id="toggle-main" class="toggle-btn active-main">
                <span style="margin-right: 5px;">ğŸ´</span> æ‰¾æ­£é¤
            </button>
            <button id="toggle-tea" class="toggle-btn">
                <span style="margin-right: 5px;">â˜•</span> ä¸‹åˆèŒ¶
            </button>
        </div>

        <div class="section-title">1. ç”¨é¤æƒ…å¢ƒ</div>
        <div id="situation-selection" class="selection-grid">
            <div id="situation-casual" class="selection-button situation-btn active-select" data-value="éš¨ä¾¿åƒåƒ">
                <span class="icon">ğŸ”</span> éš¨ä¾¿åƒåƒ
            </div>
            <div id="situation-solo" class="selection-button situation-btn" data-value="1äººç¨äº«">
                <span class="icon">ğŸ‘¤</span> 1äººç¨äº«
            </div>
            <div id="situation-couple" class="selection-button situation-btn" data-value="2äººç´„æœƒ">
                <span class="icon">ğŸ’–</span> 2äººç´„æœƒ
            </div>
            <div id="situation-group" class="selection-button situation-btn" data-value="å¤šäººèšé¤">
                <span class="icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span> å¤šäººèšé¤
            </div>
        </div>

        <div class="section-title">2. æƒ³åƒä»€éº¼ï¼Ÿ</div>
        
        <div id="food-selection-main" class="selection-grid">
            <div id="food-beef" class="selection-button food-btn" data-value="ç‰›è‚‰éºµ">
                <span class="icon">ğŸœ</span> ç‰›è‚‰éºµ
            </div>
            <div id="food-lunch" class="selection-button food-btn" data-value="ä¾¿ç•¶ç°¡é¤">
                <span class="icon">ğŸ±</span> ä¾¿ç•¶ç°¡é¤
            </div>
            <div id="food-snack-noodle" class="selection-button food-btn" data-value="å°åƒ/éºµåº—">
                <span class="icon">ğŸ¥Ÿ</span> å°åƒ/éºµåº—
            </div>
            <div id="food-dumpling" class="selection-button food-btn" data-value="æ°´é¤ƒ/é‹è²¼">
                <span class="icon">ğŸ¤</span> æ°´é¤ƒ/é‹è²¼
            </div>
            <div id="food-hotpot" class="selection-button food-btn" data-value="ç«é‹">
                <span class="icon">ğŸ²</span> ç«é‹
            </div>
            <div id="food-teppanyaki" class="selection-button food-btn" data-value="éµæ¿ç‡’">
                <span class="icon">ğŸ³</span> éµæ¿ç‡’
            </div>
            <div id="food-steak" class="selection-button food-btn" data-value="ç‰›æ’">
                <span class="icon">ğŸ¥©</span> ç‰›æ’
            </div>
            <div id="food-pasta" class="selection-button food-btn" data-value="ç¾©å¤§åˆ©éºµ">
                <span class="icon">ğŸ</span> ç¾©å¤§åˆ©éºµ
            </div>
            <div id="food-fastfood" class="selection-button food-btn" data-value="æ¼¢å ¡/é€Ÿé£Ÿ">
                <span class="icon">ğŸŸ</span> æ¼¢å ¡/é€Ÿé£Ÿ
            </div>
            <div id="food-japanese" class="selection-button food-btn" data-value="æ—¥å¼æ–™ç†">
                <span class="icon">ğŸ£</span> æ—¥å¼æ–™ç†
            </div>
            <div id="food-korean" class="selection-button food-btn" data-value="éŸ“å¼æ–™ç†">
                <span class="icon">ğŸ¥¢ğŸš</span> éŸ“å¼æ–™ç†
            </div>
            <div id="food-thai" class="selection-button food-btn" data-value="æ³°å¼æ–™ç†">
                <span class="icon">ğŸ‡¹ğŸ‡­</span> æ³°å¼æ–™ç†
            </div>
            <div id="food-curry" class="selection-button food-btn" data-value="å’–å“©">
                <span class="icon">ğŸ›</span> å’–å“©
            </div>
            <div id="food-breakfast" class="selection-button food-btn" data-value="æ—©åˆé¤">
                <span class="icon">ğŸ¥ª</span> æ—©åˆé¤
            </div>
            <div id="food-vegetarian" class="selection-button food-btn" data-value="ç´ é£Ÿ">
                <span class="icon">ğŸ¥¬</span> ç´ é£Ÿ
            </div>
        </div>

        <div id="food-selection-tea" class="selection-grid hidden-food">
            <div id="food-drink" class="selection-button food-btn" data-value="æ‰‹æ–é£²">
                <span class="icon">ğŸ¥¤</span> æ‰‹æ–é£²
            </div>
            <div id="food-coffee" class="selection-button food-btn" data-value="å’–å•¡å»³">
                <span class="icon">â˜•</span> å’–å•¡å»³
            </div>
            <div id="food-fried" class="selection-button food-btn" data-value="ç‚¸é›">
                <span class="icon">ğŸ—</span> ç‚¸é›/é¹¹é…¥é›
            </div>
            <div id="food-cake" class="selection-button food-btn" data-value="è»Šè¼ªé¤…">
                <span class="icon">ğŸ¥</span> è»Šè¼ªé¤…/é›è›‹ç³•
            </div>
            <div id="food-bakery" class="selection-button food-btn" data-value="è”¥æ²¹é¤…">
                <span class="icon">ğŸ«“</span> è”¥æ²¹é¤…/æŠ“é¤…
            </div>
            <div id="food-dessert" class="selection-button food-btn" data-value="ç”œé»">
                <span class="icon">ğŸ§</span> ç”œé»/å†°å“
            </div>
            <div id="food-doughnut" class="selection-button food-btn" data-value="éºµåŒ…">
                <span class="icon">ğŸ©</span> éºµåŒ…/ç”œç”œåœˆ
            </div>
            <div id="food-snack" class="selection-button food-btn" data-value="ç« é­šç‡’">
                <span class="icon">ğŸ™</span> ç« é­šç‡’/å°åƒ
            </div>
        </div>

        <div class="action-buttons">
            <button id="search-button" class="action-btn">
                <span style="margin-right: 5px;">ğŸ”</span> æœå°‹
            </button>
            <button id="random-button" class="action-btn">
                <span style="margin-right: 5px;">ğŸ²</span> å¹«æˆ‘é¸
            </button>
        </div>
        
        <p style="text-align: center; font-size: 0.8em; color: #999; margin-top: 20px;">
            æç¤º: é»æ“ŠæŒ‰éˆ•é¸ä¸­æˆ–å–æ¶ˆé¸ä¸­ï¼Œé»æ“Šã€Œæœå°‹ã€é–‹å§‹æ¢ç´¢ã€‚
        </p>
    </div>

    <script>
        // --- 1. å®šç¾©é¸é …åˆ—è¡¨ (å·²æ›´æ–°æ­£é¤é¸é …åŠæ—©åˆé¤/ç´ é£Ÿ) ---
        const situationOptions = {
            'situation-casual': 'éš¨ä¾¿åƒåƒ', 'situation-solo': '1äººç¨äº«',
            'situation-couple': '2äººç´„æœƒ', 'situation-group': 'å¤šäººèšé¤'
        };

        const foodOptionsMain = {
            'food-beef': 'ç‰›è‚‰éºµ', 'food-lunch': 'ä¾¿ç•¶ç°¡é¤',
            'food-snack-noodle': 'å°åƒ/éºµåº—', 'food-dumpling': 'æ°´é¤ƒ/é‹è²¼',
            'food-hotpot': 'ç«é‹', 'food-teppanyaki': 'éµæ¿ç‡’',
            'food-steak': 'ç‰›æ’', 'food-pasta': 'ç¾©å¤§åˆ©éºµ',
            'food-fastfood': 'æ¼¢å ¡/é€Ÿé£Ÿ', 'food-japanese': 'æ—¥å¼æ–™ç†',
            'food-korean': 'éŸ“å¼æ–™ç†', 'food-thai': 'æ³°å¼æ–™ç†',
            'food-curry': 'å’–å“©', 'food-breakfast': 'æ—©åˆé¤', // å·²æ”¹ç‚ºæ—©åˆé¤
            'food-vegetarian': 'ç´ é£Ÿ', // å·²æ–°å¢ç´ é£Ÿ
        };

        const foodOptionsTea = {
            'food-drink': 'æ‰‹æ–é£²', 'food-coffee': 'å’–å•¡å»³',
            'food-fried': 'ç‚¸é›', 'food-cake': 'é›è›‹ç³•',
            'food-bakery': 'è”¥æ²¹é¤…', 'food-dessert': 'ç”œé»',
            'food-doughnut': 'éºµåŒ…', 'food-snack': 'ç« é­šç‡’',
        };

        let currentFoodOptions = foodOptionsMain; 
        const GMAP_BASE_URL = "https://www.google.com/maps/search/?api=1&query=";


        // --- 2. æ ¸å¿ƒå‡½æ•¸ï¼šæ§‹å»º Google Map é€£çµ (ä¸è®Š) ---
        function buildGoogleMapURL(situation, food) {
            let baseQuery = food;

            if (situation === 'å¤šäººèšé¤') {
                baseQuery += ' é¤å»³ å¤§ç©ºé–“';
            } else if (situation === '1äººç¨äº«' || situation === 'éš¨ä¾¿åƒåƒ') {
                baseQuery += ' å°åƒ ä¾¿ç•¶';
            } else if (situation === '2äººç´„æœƒ') {
                baseQuery += ' æµªæ¼« æ°£æ°›é¤å»³';
            }
            
            const finalQuery = baseQuery + ' near me';
            const encodedQuery = encodeURIComponent(finalQuery);

            return GMAP_BASE_URL + encodedQuery;
        }


        // --- 3. UI äº’å‹•èˆ‡æ•¸æ“šç²å–é‚è¼¯ (ä¸è®Š) ---

        const foodSelectionMainDiv = document.getElementById('food-selection-main');
        const foodSelectionTeaDiv = document.getElementById('food-selection-tea');
        const situationButtons = document.querySelectorAll('.situation-btn');
        const allFoodButtons = document.querySelectorAll('.food-btn');
        const toggleMain = document.getElementById('toggle-main');
        const toggleTea = document.getElementById('toggle-tea');

        function switchFoodSelection(isMainMeal) {
            // åˆ‡æ› DOM é¡¯ç¤º
            if (isMainMeal) {
                foodSelectionMainDiv.classList.remove('hidden-food');
                foodSelectionTeaDiv.classList.add('hidden-food');
                currentFoodOptions = foodOptionsMain; 
            } else {
                foodSelectionMainDiv.classList.add('hidden-food');
                foodSelectionTeaDiv.classList.remove('hidden-food');
                currentFoodOptions = foodOptionsTea;
            }
            
            // æ¸…é™¤ä¸¦è¨­å®šæ–°çš„é è¨­é¸ä¸­é … (é¸æ“‡æ–°é¸å–®ä¸­çš„ç¬¬ä¸€å€‹)
            allFoodButtons.forEach(b => b.classList.remove('active-select'));
            
            const defaultId = isMainMeal ? 'food-beef' : 'food-drink';
            const defaultButton = document.getElementById(defaultId);
            if (defaultButton) defaultButton.classList.add('active-select');
        }

        // ç¶å®šä¸»é¤/ä¸‹åˆèŒ¶çš„åˆ‡æ›äº‹ä»¶
        [toggleMain, toggleTea].forEach(btn => {
            btn.addEventListener('click', () => {
                // åˆ‡æ›æ¨£å¼
                toggleMain.classList.remove('active-main');
                toggleTea.classList.remove('active-main');
                btn.classList.add('active-main');

                // åˆ‡æ›é£Ÿç‰©é¸å–®
                const isMainMeal = (btn.id === 'toggle-main');
                switchFoodSelection(isMainMeal);
            });
        });

        // ç”¨é¤æƒ…å¢ƒå–®é¸ç›£è½
        situationButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                situationButtons.forEach(b => b.classList.remove('active-select'));
                btn.classList.add('active-select');
            });
        });

        // é£Ÿç‰©é¸é …å–®é¸ç›£è½
        allFoodButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                allFoodButtons.forEach(b => b.classList.remove('active-select'));
                btn.classList.add('active-select');
            });
        });


        // ç²å–ç•¶å‰è¢«é¸ä¸­çš„æƒ…å¢ƒå’Œé£Ÿç‰© (ä¸è®Š)
        function getCurrentlySelected() {
            const selectedSituationBtn = document.querySelector('.situation-btn.active-select');
            const selectedFoodBtn = document.querySelector('.food-btn.active-select');

            if (!selectedSituationBtn || !selectedFoodBtn) {
                alert("è«‹å‹™å¿…é¸æ“‡ä¸€é …ç”¨é¤æƒ…å¢ƒå’Œä¸€é …æƒ³åƒçš„é£Ÿç‰©ï¼");
                return null;
            }
            
            return { 
                situation: selectedSituationBtn.getAttribute('data-value'), 
                food: selectedFoodBtn.getAttribute('data-value')
            };
        }


        // --- 4. ç¶å®šã€Œæœå°‹ã€æŒ‰éˆ•é‚è¼¯ (ä¸è®Š) ---
        document.getElementById('search-button').addEventListener('click', () => {
            const selection = getCurrentlySelected();

            if (selection) {
                const url = buildGoogleMapURL(selection.situation, selection.food);
                window.open(url, '_blank');
            }
        });


        // --- 5. ç¶å®šã€Œå¹«æˆ‘é¸ã€æŒ‰éˆ•é‚è¼¯ (ä¸è®Š) ---
        function highlightRandomSelection(idToHighlight) {
             // å‚³å…¥ id è€Œä¸æ˜¯æ‰€æœ‰æŒ‰éˆ•é›†åˆï¼Œè®“å®ƒè‡ªå‹•å°‹æ‰¾ä¸¦é«˜äº®
             allFoodButtons.forEach(b => b.classList.remove('active-select'));
             situationButtons.forEach(b => b.classList.remove('active-select'));
             
             const selectedElement = document.getElementById(idToHighlight);
             if (selectedElement) selectedElement.classList.add('active-select');
        }

        document.getElementById('random-button').addEventListener('click', () => {
            // éš¨æ©Ÿé¸å‡ºæƒ…å¢ƒ
            const situationKeys = Object.keys(situationOptions);
            const randomSituationKey = situationKeys[Math.floor(Math.random() * situationKeys.length)];
            const randomSituation = situationOptions[randomSituationKey];

            // éš¨æ©Ÿé¸å‡ºé£Ÿç‰© (ä½¿ç”¨ç•¶å‰æ´»èºçš„é£Ÿç‰©é¸é …é›†åˆ)
            const foodKeys = Object.keys(currentFoodOptions);
            const randomFoodKey = foodKeys[Math.floor(Math.random() * foodKeys.length)];
            const randomFood = currentFoodOptions[randomFoodKey];

            // ç¢ºä¿ UI é¡¯ç¤ºèˆ‡éš¨æ©ŸçµæœåŒæ­¥
            switchFoodSelection(currentFoodOptions === foodOptionsMain);

            // æ›´æ–° UI é¡¯ç¤ºéš¨æ©Ÿçµæœ
            highlightRandomSelection(randomSituationKey);
            highlightRandomSelection(randomFoodKey);

            // æ§‹å»ºä¸¦è·³è½‰ URL
            const url = buildGoogleMapURL(randomSituation, randomFood);
            window.open(url, '_blank');
        });

        // ç¢ºä¿åˆå§‹ç‹€æ…‹ï¼šé è¨­åœ¨ã€Œæ‰¾æ­£é¤ã€ä¸¦é¸ä¸­ç¬¬ä¸€å€‹é¸é …
        switchFoodSelection(true); 
    </script>
</body>
</html>