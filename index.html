<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>瓦勒斯美食雷達 V1.0</title>
    <style>
        /* CSS 樣式開始 */
        :root {
            --main-red: #E91E63; /* 主題紅 */
            --main-orange: #FF9800; /* 按鈕強調色 */
            --bg-light: #F8F8F8; /* 淺背景色 */
            --text-dark: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* 標題區 */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: var(--main-red);
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .header p {
            color: #777;
            margin-top: 0;
            font-size: 0.9em;
        }

        /* 主餐/下午茶切換按鈕組 */
        .main-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background-color: #eee;
            border-radius: 8px;
            padding: 5px;
        }

        .toggle-btn {
            flex-grow: 1;
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            border-radius: 6px;
            background-color: transparent;
            color: var(--text-dark);
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
        }

        .toggle-btn.active-main {
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            color: var(--main-orange);
            font-weight: bold;
        }

        /* 選擇區塊 */
        .section-title {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--main-red);
            border-left: 4px solid var(--main-red);
            padding-left: 10px;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .selection-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .selection-button {
            padding: 15px 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: white;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95em;
            user-select: none;
        }

        /* 用餐情境按鈕的特殊樣式 */
        .selection-button.situation-btn i {
            color: #673AB7; /* 紫色圖標 */
            margin-right: 5px;
        }

        /* 食物選項按鈕的特殊樣式 */
        .selection-button.food-btn i {
            color: #FFC107; /* 黃色圖標 */
            margin-right: 5px;
        }

        /* 按鈕選中樣式 */
        .selection-button.active-select {
            border: 2px solid var(--main-orange);
            background-color: #FFF3E0; /* 淺橘色背景 */
            color: var(--text-dark);
            box-shadow: 0 0 5px rgba(255, 152, 0, 0.5);
            font-weight: bold;
        }

        /* 搜尋按鈕組 */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            flex-grow: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        #search-button {
            background-color: var(--main-orange);
            color: white;
        }

        #random-button {
            background-color: #673AB7; /* 紫色 */
            color: white;
        }

        .action-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        /* 響應式調整 */
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            .selection-grid {
                grid-template-columns: 1fr;
            }
        }
        /* CSS 樣式結束 */
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <i class="fas fa-map-marker-alt" style="color: var(--main-red); margin-right: 5px;"></i>
            <h1>瓦勒斯美食雷達 V1.0</h1>
            <p>Google Map 智慧快搜</p>
        </div>

        <div class="main-toggle">
            <button id="toggle-main" class="toggle-btn active-main">
                <i class="fas fa-utensils"></i> 找正餐
            </button>
            <button id="toggle-tea" class="toggle-btn">
                <i class="fas fa-coffee"></i> 下午茶
            </button>
        </div>

        <div class="section-title">1. 用餐情境</div>
        <div id="situation-selection" class="selection-grid">
            <div id="situation-casual" class="selection-button situation-btn active-select" data-value="隨便吃吃">
                <i class="fas fa-hamburger"></i> 隨便吃吃
            </div>
            <div id="situation-solo" class="selection-button situation-btn" data-value="1人獨享">
                <i class="fas fa-user"></i> 1人獨享
            </div>
            <div id="situation-couple" class="selection-button situation-btn" data-value="2人約會">
                <i class="fas fa-heart"></i> 2人約會
            </div>
            <div id="situation-group" class="selection-button situation-btn" data-value="多人聚餐">
                <i class="fas fa-users"></i> 多人聚餐
            </div>
        </div>

        <div class="section-title">2. 想吃什麼？</div>
        <div id="food-selection" class="selection-grid">
            <div id="food-drink" class="selection-button food-btn active-select" data-value="手搖飲">
                <i class="fas fa-mug-hot"></i> 手搖飲
            </div>
            <div id="food-coffee" class="selection-button food-btn" data-value="咖啡廳">
                <i class="fas fa-coffee"></i> 咖啡廳
            </div>
            <div id="food-fried" class="selection-button food-btn" data-value="炸雞">
                <i class="fas fa-drumstick-bite"></i> 炸雞/鹹酥雞
            </div>
            <div id="food-cake" class="selection-button food-btn" data-value="車輪餅">
                <i class="fas fa-cookie"></i> 車輪餅/雞蛋糕
            </div>
            <div id="food-bakery" class="selection-button food-btn" data-value="蔥油餅">
                <i class="fas fa-bread-slice"></i> 蔥油餅/抓餅
            </div>
            <div id="food-dessert" class="selection-button food-btn" data-value="甜點">
                <i class="fas fa-ice-cream"></i> 甜點/冰品
            </div>
            <div id="food-doughnut" class="selection-button food-btn" data-value="麵包">
                <i class="fas fa-doughnut"></i> 麵包/甜甜圈
            </div>
            <div id="food-snack" class="selection-button food-btn" data-value="章魚燒">
                <i class="fas fa-fish-fins"></i> 章魚燒/小吃
            </div>
        </div>

        <div class="action-buttons">
            <button id="search-button" class="action-btn">
                <i class="fas fa-search"></i> 搜尋
            </button>
            <button id="random-button" class="action-btn">
                <i class="fas fa-dice"></i> 幫我選
            </button>
        </div>
        
        <p style="text-align: center; font-size: 0.8em; color: #999; margin-top: 20px;">
            提示: 點擊按鈕選中或取消選中，點擊「搜尋」開始探索。
        </p>
    </div>

    <script>
        // --- 1. 定義選項列表 ---
        const situationOptions = {
            'situation-casual': '隨便吃吃',
            'situation-solo': '1人獨享',
            'situation-couple': '2人約會',
            'situation-group': '多人聚餐'
        };

        const foodOptions = {
            'food-drink': '手搖飲',
            'food-coffee': '咖啡廳',
            'food-fried': '炸雞', 
            'food-cake': '雞蛋糕', 
            'food-bakery': '蔥油餅', 
            'food-dessert': '甜點',
            'food-doughnut': '麵包',
            'food-snack': '章魚燒',
        };

        // 注意：為了避免瀏覽器安全問題，請使用完整的 Google Maps URL，而不是簡短的路徑。
        const GMAP_BASE_URL = "https://www.google.com/maps/search/?api=1&query=";


        // --- 2. 核心函數：構建 Google Map 連結 ---
        function buildGoogleMapURL(situation, food) {
            let baseQuery = food;

            if (situation === '多人聚餐') {
                baseQuery += ' 餐廳 大空間';
            } else if (situation === '1人獨享' || situation === '隨便吃吃') {
                baseQuery += ' 小吃 便當';
            } else if (situation === '2人約會') {
                baseQuery += ' 浪漫 氣氛餐廳';
            }
            
            const finalQuery = baseQuery + ' near me';
            const encodedQuery = encodeURIComponent(finalQuery);

            return GMAP_BASE_URL + encodedQuery;
        }


        // --- 3. UI 互動與數據獲取邏輯 ---

        // 用餐情境是單選
        const situationButtons = document.querySelectorAll('.situation-btn');
        situationButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                situationButtons.forEach(b => b.classList.remove('active-select'));
                btn.classList.add('active-select');
            });
        });

        // 食物選項是單選
        const foodButtons = document.querySelectorAll('.food-btn');
        foodButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                foodButtons.forEach(b => b.classList.remove('active-select'));
                btn.classList.add('active-select');
            });
        });
        
        // 切換主餐/下午茶的邏輯
        const toggleMain = document.getElementById('toggle-main');
        const toggleTea = document.getElementById('toggle-tea');
        [toggleMain, toggleTea].forEach(btn => {
            btn.addEventListener('click', () => {
                toggleMain.classList.remove('active-main');
                toggleTea.classList.remove('active-main');
                btn.classList.add('active-main');
            });
        });


        // 獲取當前被選中的情境和食物
        function getCurrentlySelected() {
            const selectedSituationBtn = document.querySelector('.situation-btn.active-select');
            const selectedFoodBtn = document.querySelector('.food-btn.active-select');

            if (!selectedSituationBtn || !selectedFoodBtn) {
                alert("請務必選擇一項用餐情境和一項想吃的食物！");
                return null;
            }
            
            // 使用 data-value 屬性來獲取中文描述
            return { 
                situation: selectedSituationBtn.getAttribute('data-value'), 
                food: selectedFoodBtn.getAttribute('data-value')
            };
        }


        // --- 4. 綁定「搜尋」按鈕邏輯 ---
        document.getElementById('search-button').addEventListener('click', () => {
            const selection = getCurrentlySelected();

            if (selection) {
                const url = buildGoogleMapURL(selection.situation, selection.food);
                window.open(url, '_blank');
            }
        });


        // --- 5. 綁定「幫我選」按鈕邏輯 (隨機選擇) ---
        
        // 額外功能：更新 UI 顯示隨機選中的項目
        function highlightRandomSelection(idToHighlight, allButtons) {
             allButtons.forEach(b => b.classList.remove('active-select'));
             document.getElementById(idToHighlight).classList.add('active-select');
        }

        document.getElementById('random-button').addEventListener('click', () => {
            // 隨機選出情境
            const situationKeys = Object.keys(situationOptions);
            const randomSituationKey = situationKeys[Math.floor(Math.random() * situationKeys.length)];
            const randomSituation = situationOptions[randomSituationKey];

            // 隨機選出食物
            const foodKeys = Object.keys(foodOptions);
            const randomFoodKey = foodKeys[Math.floor(Math.random() * foodKeys.length)];
            const randomFood = foodOptions[randomFoodKey];

            // 更新 UI 顯示隨機結果
            highlightRandomSelection(randomSituationKey, situationButtons);
            highlightRandomSelection(randomFoodKey, foodButtons);

            // 構建並跳轉 URL
            const url = buildGoogleMapURL(randomSituation, randomFood);
            window.open(url, '_blank');
        });

    </script>
</body>
</html>